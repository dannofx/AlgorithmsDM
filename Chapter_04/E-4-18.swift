// Chapter 4, Exercise 4-18
// Suppose an array A consists of n elements, each of which is red, white, 
// or blue. We seek to sort the elements so that all the reds come before all the whites, 
// which come before all the blues The only operation permitted on the keys are
//    - Examine(A,i) – report the color of the ith element of A.
//    - Swap(A,i,j) – swap the ith element of A with the jth element.

import Foundation

enum Color: Int {
    case none = -1
    case red = 0
    case white = 1
    case blue = 2
}

struct MisteryCollection {
    private(set) var elements: [Color]
    init(withElements elements: [Color]) {
        self.elements = elements
    }
    
    func examine(index: Int) -> Color {
        if index < self.elements.count {
            return self.elements[index]
        } else {
            return Color.none
        }
    }
    
    mutating func swap(i: Int, j: Int) {
        if i >= self.elements.count || j >= self.elements.count {
            return
        }
        let aux = self.elements[i]
        self.elements[i] = self.elements[j]
        self.elements[j] = aux
    }
}

let inputColors = [Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.blue, Color.white, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.blue, Color.red, Color.red, Color.blue, Color.white, Color.white, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.red, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.white, Color.white, Color.blue, Color.red, Color.red, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.red, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.red, Color.white, Color.white, Color.red, Color.red, Color.blue, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.white, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.red, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.white, Color.white, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.white, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.white, Color.white, Color.white, Color.white, Color.red, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.red, Color.red, Color.red, Color.blue, Color.white, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.blue, Color.blue, Color.white, Color.red, Color.white, Color.blue, Color.white, Color.white, Color.white, Color.red, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.red, Color.red, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.blue, Color.white, Color.white, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.blue, Color.red, Color.red, Color.red, Color.white, Color.white, Color.red, Color.red, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.red, Color.white, Color.blue, Color.white, Color.red, Color.blue, Color.blue, Color.blue, Color.blue, Color.red, Color.red, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.blue, Color.blue, Color.blue, Color.blue, Color.blue, Color.red, Color.white, Color.white, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.white, Color.white, Color.blue, Color.red, Color.red, Color.blue, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.white, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.white, Color.white, Color.white, Color.white, Color.red, Color.white, Color.white, Color.red, Color.blue, Color.red, Color.red, Color.blue, Color.white, Color.red, Color.white, Color.white, Color.red, Color.white, Color.blue, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.red, Color.white, Color.white, Color.red, Color.white, Color.white, Color.red, Color.red, Color.red, Color.white, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.blue, Color.blue, Color.blue, Color.red, Color.blue, Color.blue, Color.white, Color.red, Color.blue, Color.red, Color.blue, Color.red, Color.red, Color.white, Color.blue, Color.white, Color.blue, Color.blue, Color.blue, Color.blue, Color.red, Color.red, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.blue, Color.blue, Color.white, Color.red, Color.red, Color.blue, Color.white, Color.white, Color.white, Color.white, Color.red, Color.red, Color.red, Color.red, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.white, Color.red, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.white, Color.white, Color.red, Color.red, Color.white, Color.white, Color.red, Color.white, Color.white, Color.red, Color.red, Color.white, Color.blue, Color.white, Color.blue, Color.blue, Color.red, Color.white, Color.red, Color.white, Color.white, Color.red, Color.red, Color.red, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.blue, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.blue, Color.red, Color.blue, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.red, Color.blue, Color.white, Color.white, Color.red, Color.red, Color.red, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.blue, Color.white, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.white, Color.blue, Color.red, Color.red, Color.white, Color.white, Color.blue, Color.red, Color.blue, Color.white, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.white, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.red, Color.white, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.white, Color.blue, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.white, Color.white, Color.red, Color.red, Color.white, Color.red, Color.red, Color.white, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.red, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.white, Color.red, Color.red, Color.red, Color.blue, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.white, Color.blue, Color.blue, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.red, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.blue, Color.white, Color.white, Color.white, Color.blue, Color.red, Color.red, Color.red, Color.red, Color.blue, Color.red, Color.red, Color.red, Color.red, Color.red, Color.blue, Color.blue, Color.white, Color.red, Color.red, Color.blue, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.red, Color.white, Color.red, Color.red, Color.red, Color.red, Color.red, Color.white, Color.white, Color.red, Color.blue, Color.red, Color.blue, Color.white, Color.red, Color.white, Color.white, Color.white, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.blue, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.white, Color.white, Color.blue, Color.white, Color.red, Color.red, Color.white, Color.white, Color.blue, Color.red, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.white, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.white, Color.white, Color.white, Color.red, Color.red, Color.white, Color.white, Color.blue, Color.blue, Color.red, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.red, Color.red, Color.red, Color.red, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.blue, Color.white, Color.white, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.red, Color.blue, Color.red, Color.white, Color.white, Color.blue, Color.red, Color.red, Color.blue, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.white, Color.red, Color.white, Color.blue, Color.blue, Color.red, Color.blue, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.red, Color.red, Color.blue, Color.red, Color.red, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.blue, Color.red, Color.red, Color.white, Color.white, Color.white, Color.white, Color.white, Color.white, Color.red, Color.red, Color.blue, Color.red, Color.red, Color.white, Color.blue, Color.blue, Color.blue, Color.red, Color.blue, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.white, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.white, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.blue, Color.blue, Color.blue, Color.white, Color.white, Color.white, Color.red, Color.red, Color.blue, Color.red, Color.red, Color.red, Color.red, Color.white, Color.red, Color.blue, Color.red, Color.red, Color.blue, Color.red, Color.red, Color.white, Color.white, Color.blue, Color.white, Color.red, Color.blue, Color.white, Color.white, Color.white, Color.red, Color.blue, Color.white, Color.red, Color.red, Color.white, Color.red, Color.red, Color.red, Color.white, Color.blue, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.blue, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.blue, Color.blue, Color.red, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.blue, Color.red, Color.red, Color.blue, Color.blue, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.red, Color.blue, Color.blue, Color.white, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.red, Color.red, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.white, Color.blue, Color.blue, Color.white, Color.red, Color.blue, Color.white, Color.red, Color.red, Color.red, Color.white, Color.blue, Color.red, Color.blue, Color.red, Color.red, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.white, Color.blue, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.white, Color.white, Color.red, Color.white, Color.blue, Color.blue, Color.red, Color.red, Color.blue, Color.white, Color.white, Color.red, Color.blue, Color.blue, Color.red, Color.white, Color.blue, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.white, Color.red, Color.white, Color.blue, Color.red, Color.red, Color.white, Color.white, Color.blue, Color.blue, Color.blue, Color.blue, Color.blue, Color.white, Color.blue, Color.blue, Color.blue, Color.red, Color.red, Color.blue, Color.white, Color.white, Color.red, Color.white, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.blue, Color.blue, Color.white, Color.white, Color.blue, Color.blue, Color.red, Color.blue, Color.white, Color.red, Color.blue, Color.red, Color.white, Color.red, Color.blue, Color.blue, Color.blue, Color.red, Color.red, Color.blue, Color.white, Color.red, Color.red, Color.blue]

var misteryCol = MisteryCollection(withElements: inputColors)

func colorPart(color: Color, start: Int, end: Int) -> Int {
    var changeIndex = start
    for i in start...end {
        if misteryCol.elements[i].rawValue < color.rawValue {
            misteryCol.swap(i: changeIndex, j: i)
            changeIndex += 1
        }
    }
    return changeIndex
}

let endIndex = colorPart(color: .blue, start: 0, end: misteryCol.elements.count - 1)
if endIndex > 0 {
    _ = colorPart(color: .white, start: 0, end: endIndex - 1)
}
print("Result \(misteryCol.elements)")

// Random array generation
//var res = ""
//for _ in 0...1000 {
//    let index = Int(arc4random_uniform(3))
//    let color = Color(rawValue: index)!
//    res += "Color.\(color), "
//}
//print(res)
